server {
    server_name  localhost;
    listen       8070;

    # allow any size for client request body
    client_max_body_size 0;
    client_header_buffer_size   64k;
    large_client_header_buffers 8 64k;
    client_body_timeout 120;
    client_header_timeout 120;
    keepalive_timeout 120;
    send_timeout 120;

    location / {
        root /etc/nginx/static/;
        try_files $uri /index.html;
        index index.html index.html;
    }

    location /api {
        proxy_connect_timeout 3000s;
        proxy_send_timeout   3000;
        proxy_read_timeout   3000;
        proxy_set_header   X-Real-IP $remote_addr;
        proxy_set_header   Host      $http_host;
        proxy_set_header X-B3-Sampled "";
        proxy_set_header X-B3-Spanid "";
        proxy_set_header X-B3-Traceid "";
        proxy_set_header X-Envoy-Attempt-Count "";
        proxy_set_header X-Envoy-Decorator-Operation "";
        proxy_set_header X-Envoy-Internal "";
        proxy_set_header X-Envoy-Peer-Metadata "";
        proxy_set_header X-Envoy-Peer-Metadata-Id "";
        # these two lines here
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_pass http://127.0.0.1:18070;
    }
}
